{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\projects\\\\SonnenBrille\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\projects\\\\SonnenBrille\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:\\\\projects\\\\SonnenBrille\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import StripeCheckout from'react-stripe-checkout';import axios from'axios';import{getBasketTotal}from'./reducer';import CurrencyFormat from'react-currency-format';import{useStateValue}from'./StateProvider';import{toast}from'react-toastify';import'./Index1.css';toast.configure();function Index1(){var _useStateValue=useStateValue(),_useStateValue2=_slicedToArray(_useStateValue,2),basket=_useStateValue2[0].basket,dispatch=_useStateValue2[1];function handleToken(_x,_x2){return _handleToken.apply(this,arguments);}function _handleToken(){_handleToken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(token,addresses){var response,status;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('/checkout1',{token:token,basket:basket});case 2:response=_context.sent;status=response.data.status;if(status=='success'){toast('Success! Check email for details',{type:'success'});}else{toast('Something went wrong',{type:'error'});}case 5:case\"end\":return _context.stop();}}},_callee);}));return _handleToken.apply(this,arguments);}return/*#__PURE__*/React.createElement(\"div\",{className:\"d\"},/*#__PURE__*/React.createElement(CurrencyFormat,{renderText:function renderText(value){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"p\",null,\"Subtotal (\",basket.length,\" items:\",/*#__PURE__*/React.createElement(\"strong\",null,\"\".concat(value)),\")\"));},decimalScale:2,value:getBasketTotal(basket),displayType:\"text\",thousandSeparator:true,prefix:\"$\"}),/*#__PURE__*/React.createElement(StripeCheckout,{stripeKey:\"pk_test_51HXr9JCbnsbZ6VdUBG2At7u7YPv63RXeiwQCd4xrX5A0YwsL85I4Ya0oLNpAslGMk4HKp5zWbrW35qNuNsF1j0ke00CIxmd1vR\",token:handleToken,billingAddress:true,shippingAddress:true,amount:getBasketTotal(basket)*100}));}export default Index1;","map":{"version":3,"sources":["E:/projects/SonnenBrille/src/Index1.js"],"names":["React","useState","StripeCheckout","axios","getBasketTotal","CurrencyFormat","useStateValue","toast","configure","Index1","basket","dispatch","handleToken","token","addresses","post","response","status","data","type","value","length"],"mappings":"+bAAA,MAAOA,CAAAA,KAAP,EAAcC,QAAd,KAA6B,OAA7B,CACA,MAAOC,CAAAA,cAAP,KAA2B,uBAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,cAAR,KAA6B,WAA7B,CACA,MAAOC,CAAAA,cAAP,KAA2B,uBAA3B,CACA,OAASC,aAAT,KAA8B,iBAA9B,CACA,OAAQC,KAAR,KAAoB,gBAApB,CACA,MAAO,cAAP,CACAA,KAAK,CAACC,SAAN,GAGA,QAASC,CAAAA,MAAT,EAAkB,oBACYH,aAAa,EADzB,kDACNI,MADM,oBACNA,MADM,CACEC,QADF,4BAGAC,CAAAA,WAHA,iJAGf,iBAA2BC,KAA3B,CAAiCC,SAAjC,4JAE2BX,CAAAA,KAAK,CAACY,IAAN,CAAW,YAAX,CAAwB,CACxCF,KAAK,CAALA,KADwC,CAExCH,MAAM,CAANA,MAFwC,CAAxB,CAF3B,QAEWM,QAFX,eAMYC,MANZ,CAMsBD,QAAQ,CAACE,IAN/B,CAMYD,MANZ,CAQK,GAAGA,MAAM,EAAE,SAAX,CAAqB,CACjBV,KAAK,CAAC,kCAAD,CACF,CAACY,IAAI,CAAC,SAAN,CADE,CAAL,CAGH,CAJD,IAKA,CACIZ,KAAK,CAAC,sBAAD,CACF,CAACY,IAAI,CAAC,OAAN,CADE,CAAL,CAGH,CAjBN,sDAHe,8CAuBd,mBACI,2BAAK,SAAS,CAAC,GAAf,eAEA,oBAAC,cAAD,EACA,UAAU,CAAE,oBAACC,KAAD,qBACT,qDACI,0CACcV,MAAM,CAACW,MADrB,wBACmC,4CAAYD,KAAZ,EADnC,KADJ,CADS,EADZ,CAUL,YAAY,CAAE,CAVT,CAWL,KAAK,CAAEhB,cAAc,CAACM,MAAD,CAXhB,CAYL,WAAW,CAAE,MAZR,CAaL,iBAAiB,CAAE,IAbd,CAcL,MAAM,CAAE,GAdH,EAFA,cAmBI,oBAAC,cAAD,EACA,SAAS,CAAC,6GADV,CAEA,KAAK,CAAEE,WAFP,CAGA,cAAc,KAHd,CAIA,eAAe,KAJf,CAKA,MAAM,CAAER,cAAc,CAACM,MAAD,CAAd,CAAuB,GAL/B,EAnBJ,CADJ,CA+BH,CAED,cAAeD,CAAAA,MAAf","sourcesContent":["import React,{useState} from 'react'\r\nimport StripeCheckout from 'react-stripe-checkout'\r\nimport axios from 'axios'\r\nimport {getBasketTotal} from './reducer'\r\nimport CurrencyFormat from 'react-currency-format'\r\nimport { useStateValue } from './StateProvider'\r\nimport {toast} from 'react-toastify'\r\nimport './Index1.css'\r\ntoast.configure();\r\n\r\n\r\nfunction Index1() {\r\n    const [{basket},dispatch]=useStateValue();\r\n \r\n   async function handleToken(token,addresses){\r\n          // console.log({token,addresses})\r\n        const response= await axios.post('/checkout1',{\r\n              token,\r\n              basket\r\n          });\r\n        const {status} = response.data\r\n\r\n        if(status=='success'){\r\n            toast('Success! Check email for details',\r\n               {type:'success'}\r\n            )\r\n        }else\r\n        {\r\n            toast('Something went wrong',\r\n               {type:'error'}\r\n            )\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"d\">\r\n         \r\n        <CurrencyFormat \r\n        renderText={(value)=>(\r\n           <>\r\n               <p>\r\n                  Subtotal ({basket.length} items:<strong>{`${value}`}</strong>)\r\n               </p>\r\n              \r\n           </>\r\n\r\n        )}\r\n   decimalScale={2}\r\n   value={getBasketTotal(basket)}\r\n   displayType={\"text\"}\r\n   thousandSeparator={true}\r\n   prefix={\"$\"}\r\n\r\n/>\r\n            <StripeCheckout\r\n            stripeKey=\"pk_test_51HXr9JCbnsbZ6VdUBG2At7u7YPv63RXeiwQCd4xrX5A0YwsL85I4Ya0oLNpAslGMk4HKp5zWbrW35qNuNsF1j0ke00CIxmd1vR\"\r\n            token={handleToken}\r\n            billingAddress\r\n            shippingAddress\r\n            amount={getBasketTotal(basket)*100}\r\n         \r\n            />\r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default Index1\r\n"]},"metadata":{},"sourceType":"module"}